@model List<FlashCard>

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width"/>
    <link rel="stylesheet" asp-href-include="~/css/createCard.css">
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <title>FlashCards</title>
    
    <script>
        function clickSpinner(id) {
            if (id.includes("backside")) {
                document.getElementById(id).style.transform = "rotateY(360deg)";
                document.getElementById(id).id = id.replace("backside", "");
            } else {
                document.getElementById(id).style.transform = "rotateY(180deg)";
                document.getElementById(id).id = id+"backside";
            }
        }
        
        let contentPresent = false;
        
        $.ajax({
            url: "/GetCards",
            method: "GET",
            success: function (cards) {
                document.querySelector(".carousel-inner").innerHTML = makeSlides(cards);
                contentPresent = true;
            },
            error: function (error) {
                console.log(error)
            }
        });
        
       const makeSlides = (cards) => {
           let html = '';
           cards.forEach((item, index) => {
               let activeClass = index === 0 ? 'active' : '';
               
               html += '<div class="carousel-item ' + activeClass + '">';
               html += '<div class="container" style="max-width: 500px">';
               html += '<div class="container pt-3 bg-light" style="display: flex; justify-content: center">';
               html += '<div class="flippable">';
               html += '<div class="flip-card-inner" id="' + item.flashcardId + '" onclick="clickSpinner(this.id)">';
               html += '<div class="flip-card-frontside">';
               html += '<h3 class="front-text" id="FrontSpinText">' + item.frontText + '</h3>';
               html += '<img src=""></img>';
               html += '<div id="frontSidePreview"></div>';
               html += '</div>';
               html += '<div class="flip-card-backside">';
               html += '<h3 class="back-text" id="BackSpinText">' + item.backText + '</h3>';
               html += '<img src=""></img>';
               html += '<div id="backSidePreview"></div>';
               html += '</div>';
               html += '</div>';
               html += '</div>'; 
               html += '</div>'; 
               html += '</div>';  
               html += '</div>'; 
           });
           return html;
       };
        </script>
</head>
<body>

<div class="container">
    <h1>@ViewBag.CurrentViewName</h1>
    @foreach (var flashcard in Model)
    {
        <div class="container pt-3 bg-light" style="display: flex; justify-content: center">
            <div class="flippable">
                <div class="flip-card-inner">
                    <div class="flip-card-frontside">
                        <h3 id="FrontSpinText">@flashcard.FrontText</h3>
                        <img src=""></img>
                        <div id="frontSidePreview">

                        </div>
                    </div>
                    <div class="flip-card-backside">
                        <h3 id="BackSpinText">@flashcard.BackText</h3>
                        <img src=""></img>
                        <div id="backSidePreview"></div>
                    </div>
                </div>
            </div>
        </div>
    }

    @*<table class="table table-striped">
        <tr><th>CardId</th><th>FrontText</th></tr>
        @foreach (var flashcard in Model)
        {
            <tr>
                <td>@flashcard.CardId</td>
                <td>@flashcard.FrontText</td>
            </tr>
        }
    </table>*@

</div>
</body>
</html>
